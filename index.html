<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIBRAN HUB - SIMPLE LOGIN</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #010409; --card: #161b22; --accent: #2f81f7; --text: #c9d1d9; }
        body, html { margin: 0; padding: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: flex; align-items: center; justify-content: center; }
        .card { background: var(--card); border: 1px solid #30363d; border-radius: 20px; padding: 40px; text-align: center; width: 340px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        #loader { display: none; flex-direction: column; align-items: center; justify-content: center; }
        .spin { width: 40px; height: 40px; border: 4px solid #30363d; border-top-color: var(--accent); border-radius: 50%; animation: s 1s linear infinite; }
        @keyframes s { to { transform: rotate(360deg); } }
        h2 { margin-bottom: 25px; }
        #dashboard { display: none; }
    </style>
</head>
<body>

    <div id="gate" class="card">
        <i class="fas fa-user-circle fa-4x" style="color:var(--accent); margin-bottom:20px;"></i>
        <h2>Gibran Hub</h2>
        <div id="g_id_onload" 
             data-client_id="594310366887-a3dsvn8plp139boru5kepf2o1c6ubkkv.apps.googleusercontent.com" 
             data-callback="onAuth"></div>
        <div class="g_id_signin" data-type="standard"></div>
    </div>

    <div id="loader">
        <div class="spin"></div>
        <p style="margin-top:20px; color:var(--accent);">Menyimpan Data...</p>
    </div>

    <div id="dashboard" class="card">
        <i class="fas fa-check-circle fa-4x" style="color:#238636; margin-bottom:20px;"></i>
        <h2>Berhasil!</h2>
        <p id="user-info"></p>
        <button onclick="location.reload()" style="background:var(--accent); color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; margin-top:20px;">Logout</button>
    </div>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        // LINK WEB APP LO
        const APPS_URL = "https://script.google.com/macros/s/AKfycbwDDUJ8gA_TOGwaoI5pcFGqeU_ZZvbw9Cwx-JJs9ISc8aJnjNTeM1eUV4FcO6XAhTU3/exec";

        function onAuth(res) {
            const user = JSON.parse(atob(res.credential.split('.')[1]));
            
            // Sembunyikan Login, Tampilkan Loading
            document.getElementById('gate').style.display = 'none';
            document.getElementById('loader').style.display = 'flex';

            // KIRIM DATA KE GOOGLE SHEET (HANYA NAMA & EMAIL)
            fetch(APPS_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify({
                    nama: user.name,
                    email: user.email,
                    sheet_id: "1y2O_3fK0k1Ds-diQ5M8857A27J-LDEZGdmYia1ykjOY",
                    sheet_name: "daftar pake gooogle"
                })
            })
            .then(() => {
                // Tampilkan Dashboard Sukses
                document.getElementById('loader').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                document.getElementById('user-info').innerText = "Data " + user.name + " sudah masuk ke Sheet.";
            })
            .catch(err => {
                alert("Gagal kirim data!");
                location.reload();
            });
        }
    </script>
</body>
</html>
